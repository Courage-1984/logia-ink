import{i as e}from"./main-ZDZM6f3B.js";function t(e,t="success",s=5e3){document.querySelectorAll(".toast").forEach(e=>e.remove());const o=document.createElement("div");o.className=`toast ${t}`,o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive");const a="success"===t?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width: 20px; height: 20px; margin-right: 0.5rem;"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width: 20px; height: 20px; margin-right: 0.5rem;"><circle cx="12" cy="12" r="10" /><line x1="12" y1="8" x2="12" y2="12" /><line x1="12" y1="16" x2="12.01" y2="16" /></svg>';o.innerHTML=`\n        <div class="toast-header">\n            <div style="display: flex; align-items: center; color: ${"success"===t?"var(--accent-green)":"var(--accent-pink)"};">\n                ${a}\n                <strong>${"success"===t?"Success":"Error"}</strong>\n            </div>\n            <button class="toast-close" aria-label="Close notification">&times;</button>\n        </div>\n        <div class="toast-body" style="color: var(--text-secondary);">${e}</div>\n    `,document.body.appendChild(o),setTimeout(()=>{o.classList.add("show")},10);return o.querySelector(".toast-close").addEventListener("click",()=>{n(o)}),s>0&&setTimeout(()=>{n(o)},s),o}function n(e){e.classList.remove("show"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}const s="logi-ink-contact-form",o=1e3;function a(){const e=document.getElementById("contactForm");if(!e)return;!function(){try{const e=localStorage.getItem(s);if(e){const t=JSON.parse(e);t.name&&(document.getElementById("name").value=t.name),t.email&&(document.getElementById("email").value=t.email),t.phone&&(document.getElementById("phone").value=t.phone),t.subject&&(document.getElementById("subject").value=t.subject),t.message&&(document.getElementById("message").value=t.message),l(),c()}}catch(e){}}();const t=document.getElementById("name"),n=document.getElementById("email"),o=document.getElementById("phone"),a=document.getElementById("subject"),d=document.getElementById("message");document.getElementById("submitButton"),document.getElementById("formProgressBar"),t.addEventListener("blur",()=>r(t,"name")),t.addEventListener("input",()=>{i(t,"name"),m(),l()}),n.addEventListener("blur",()=>r(n,"email")),n.addEventListener("input",()=>{i(n,"email"),m(),l()}),o.addEventListener("blur",()=>r(o,"phone")),o.addEventListener("input",()=>{i(o,"phone"),m(),l()}),a.addEventListener("blur",()=>r(a,"subject")),a.addEventListener("input",()=>{i(a,"subject"),m(),l()}),d.addEventListener("blur",()=>r(d,"message")),d.addEventListener("input",()=>{i(d,"message"),c(),m(),l()}),e.addEventListener("submit",u),document.querySelectorAll(".scroll-to-form").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();const t=document.getElementById("contactSection");t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{const e=document.getElementById("name");e&&e.focus()},500))})}),l(),function(){const e=document.querySelectorAll("[data-map-interaction]");if(0===e.length)return;e.forEach(e=>{const t=e.querySelector("[data-map-toggle]");if(!t)return;const n=t.textContent.trim()||"Enable map controls",s=t.getAttribute("data-active-label")||"Disable map controls",o=()=>{if("undefined"==typeof window)return;const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,s=90,o=window.scrollY+t.top-s;t.top>=s&&t.bottom<=n-s?(window.scrollBy({top:2,behavior:"smooth"}),setTimeout(()=>{window.scrollBy({top:-2,behavior:"smooth"})},220)):(window.scrollTo({top:Math.max(o,0),behavior:"smooth"}),setTimeout(()=>{window.scrollBy({top:-24,behavior:"smooth"})},450))},a=({focusToggle:n=!1}={})=>{e.classList.contains("is-active")||(e.classList.add("is-active"),t.classList.add("is-active"),t.setAttribute("aria-pressed","true"),t.textContent=s,n&&requestAnimationFrame(()=>t.focus()),setTimeout(o,180))},r=({focusToggle:s=!1}={})=>{e.classList.contains("is-active")&&(e.classList.remove("is-active"),t.classList.remove("is-active"),t.setAttribute("aria-pressed","false"),t.textContent=n,s&&requestAnimationFrame(()=>t.focus()))};t.addEventListener("click",t=>{t.preventDefault(),e.classList.contains("is-active")?r():a()}),t.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.classList.contains("is-active")?r():a())},{passive:!1}),e.addEventListener("keydown",e=>{"Escape"===e.key&&r({focusToggle:!0})},{passive:!0})})}(),function(){const e=document.querySelectorAll(".testimonial-text[data-text]");if(0===e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting&&!e.target.classList.contains("typed")){const n=e.target,s=n.getAttribute("data-text");n.classList.add("typed"),function(e,t){let n=0;const s=30;function o(){n<t.length?(e.textContent=t.substring(0,n+1),n++,setTimeout(o,s)):e.classList.remove("typing")}o()}(n,s),t.unobserve(n)}})},{threshold:.3,rootMargin:"0px 0px -100px 0px"});e.forEach(e=>{e.getAttribute("data-text"),e.textContent="",e.classList.add("typing"),t.observe(e)})}()}function r(e,t){const n=document.getElementById(`${t}-error`);let s=!0,a="";if(e.closest(".form-group").classList.remove("error","success"),e.hasAttribute("required")&&!e.value.trim()&&(s=!1,a=`${function(e){return{name:"Name",email:"Email",phone:"Phone",subject:"Subject",message:"Message"}[e]||e}(t)} is required`),"email"===t&&e.value.trim()){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(s=!1,a="Please enter a valid email address")}if("phone"===t&&e.value.trim()){/^[\d\s\-\+\(\)]+$/.test(e.value)||(s=!1,a="Please enter a valid phone number")}return"message"===t&&e.value.trim()&&e.value.length>o&&(s=!1,a="Message must be less than 1000 characters"),s?e.value.trim()?(e.closest(".form-group").classList.add("success"),n.textContent="",e.setAttribute("aria-invalid","false")):(n.textContent="",e.setAttribute("aria-invalid","false")):(e.closest(".form-group").classList.add("error"),n.textContent=a,n.setAttribute("role","alert"),e.setAttribute("aria-invalid","true")),s}function i(e,t){const n=document.getElementById(`${t}-error`);e.closest(".form-group").classList.remove("error"),n.textContent="",e.setAttribute("aria-invalid","false")}function c(){const e=document.getElementById("message"),t=document.getElementById("message-count");if(!e||!t)return;const n=e.value.length;t.textContent=n;const s=document.getElementById("message-counter");s.style.color=n>900?"var(--accent-pink)":n>700?"var(--accent-magenta)":"var(--text-secondary)"}function l(){const e=document.getElementById("formProgressBar");if(!e)return;const t=["name","email","subject","message"];let n=0;t.forEach(e=>{const t=document.getElementById(e);t&&t.value.trim()&&n++});const s=n/t.length*100;e.style.width=`${s}%`,e.setAttribute("aria-valuenow",s)}async function u(n){n.preventDefault();const o=n.target,a=document.getElementById("submitButton"),i=a.querySelector(".submit-text"),u=a.querySelector(".submit-spinner"),m=document.getElementById("website");if(m&&m.value)return void t("Submission failed. Please try again.","error");const d=document.getElementById("name"),g=document.getElementById("email"),v=document.getElementById("subject"),y=document.getElementById("message"),f=r(d,"name"),p=r(g,"email"),b=r(v,"subject"),h=r(y,"message");if(!(f&&p&&b&&h))return t("Please fix the errors in the form before submitting.","error"),void(f?p?b?h||y.focus():v.focus():g.focus():d.focus());a.disabled=!0,i.style.opacity="0",u.style.display="block",u.style.opacity="1";const E=new FormData(o);E.get("name"),E.get("email"),E.get("phone"),E.get("subject"),E.get("message");try{await async function(){return new Promise((e,t)=>{setTimeout(()=>{Math.random()>.1?e({success:!0}):t(new Error("Submission failed"))},1500)})}(),t("Thank you for your message! We will get back to you soon.","success",5e3),o.reset(),function(){try{localStorage.removeItem(s)}catch(e){}}(),l(),c();const e=document.createElement("div");e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.className="sr-only",e.textContent="Form submitted successfully",document.body.appendChild(e),setTimeout(()=>e.remove(),1e3)}catch(B){t(B?.message||"There was an error submitting your message. Please try again or contact us directly.","error",7e3),e(),setTimeout(()=>{d?.focus()},100)}finally{a.disabled=!1,i.style.opacity="1",u.style.opacity="0",setTimeout(()=>{u.style.display="none"},300)}}function m(){if(!document.getElementById("contactForm"))return;const e={name:document.getElementById("name").value,email:document.getElementById("email").value,phone:document.getElementById("phone").value,subject:document.getElementById("subject").value,message:document.getElementById("message").value};try{localStorage.setItem(s,JSON.stringify(e))}catch(t){}}export{a as initContactForm};
