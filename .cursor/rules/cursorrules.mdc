---
alwaysApply: true
---

# âš ï¸ CRITICAL: READ THIS FILE FIRST âš ï¸

## ğŸš¨ MANDATORY FIRST STEP FOR ALL AGENTS ğŸš¨

**BEFORE PROCEEDING WITH ANY USER PROMPT, TASK, OR REQUEST:**

1. **YOU MUST READ THIS ENTIRE FILE FIRST** (`.cursor/rules/cursorrules.mdc`)
2. **DO NOT make any changes, edits, or execute any commands until you have fully read and understood this file**
3. **This file contains the complete project structure, conventions, and rules that MUST be followed**
4. **Ignoring this file will result in incorrect implementations that don't match the project's architecture**
5. **NEVER DELETE ./.old/**

**This file is the SOURCE OF TRUTH for:**

- Project structure and file organization
- CSS architecture and module system
- JavaScript architecture and module patterns
- HTML structure and component guidelines
- Naming conventions and code standards
- Component locations and class names
- Color palette and design tokens
- Responsive breakpoints
- Animation guidelines
- Performance considerations

**If you haven't read this file yet, STOP and read it NOW before continuing.**

**Always choose the correct MCP tool based on the task:**

- If the task involves web research, scraping, competitor analysis â†’ use firecrawl-mcp.
- If the task involves debugging or inspecting a live webpage â†’ use chrome-devtools.
- If the task involves library usage, dependencies, setup, or coding examples â†’ use context7.

The agent should not hallucinate or invent information when a corresponding MCP tool can provide real data.

---

# Logi-Ink Project Rules & Structure

## IMPORTANT: Update This File

**Whenever you make structural changes to the project, update this file (`.cursor/rules/cursorrules.mdc`) accordingly.**

---

## Project Structure

### Root Directory

```
logi-ink/
â”œâ”€â”€ .cursor/              # Cursor IDE configuration
â”‚   â””â”€â”€ rules/
â”‚       â””â”€â”€ cursorrules.mdc # This file - Project rules and structure guide
â”œâ”€â”€ docs/                 # Documentation files
â”‚   â”œâ”€â”€ BUILD_AND_DEPLOY.md # Build, deploy, and clean URLs guide
â”‚   â”œâ”€â”€ QUICK_START.md
â”‚   â”œâ”€â”€ STYLE_GUIDE.md
â”‚   â”œâ”€â”€ project_commands.md # Quick command reference
â”‚   â”œâ”€â”€ IMAGE_GENERATION_PROMPTS.md
â”‚   â”œâ”€â”€ VIDEO_BACKGROUND_GUIDE.md
â”‚   â”œâ”€â”€ README.md          # Documentation index
â”‚   â”œâ”€â”€ TODO.MD            # Pending analytics/documentation follow-ups
â”‚   â”œâ”€â”€ PERFORMANCE_OPTIMIZATION_ANALYSIS.md
â”‚   â”œâ”€â”€ AUDIO_CDN_RECOMMENDATIONS.md
â”‚   â”œâ”€â”€ SOCIAL_MEDIA_IMAGE_GENERATORS.md
â”‚   â””â”€â”€ research/          # Research and analysis files (optional)
â”œâ”€â”€ tests/                # Test files
â”‚   â”œâ”€â”€ e2e/
â”‚   â”‚   â””â”€â”€ smoke.spec.js
â”‚   â”œâ”€â”€ test-fonts.html
â”‚   â””â”€â”€ test-service-worker.html
â”œâ”€â”€ scripts/              # Build and optimization scripts
â”‚   â”œâ”€â”€ optimize-images.js
â”‚   â”œâ”€â”€ optimize-video.js
â”‚   â”œâ”€â”€ convert-poster-formats.js
â”‚   â”œâ”€â”€ generate-responsive-images.js
â”‚   â”œâ”€â”€ generate-sitemap.js
â”‚   â”œâ”€â”€ generate-seo-meta.js
â”‚   â”œâ”€â”€ generate-structured-data.js
â”‚   â”œâ”€â”€ subset-fonts.js
â”‚   â”œâ”€â”€ subset-fonts-with-glyphhanger.sh
â”‚   â”œâ”€â”€ subset-fonts-with-glyphhanger.ps1
â”‚   â”œâ”€â”€ test-fonts.ps1
â”‚   â”œâ”€â”€ update-html-seo.js
â”‚   â”œâ”€â”€ inline-critical-css.js
â”‚   â”œâ”€â”€ generate-media-inventory.js
â”‚   â”œâ”€â”€ generate-dashboard-reports.js
â”‚   â”œâ”€â”€ generate-coverage-report.js
â”‚   â”œâ”€â”€ generate-performance-timeline.js
â”‚   â”œâ”€â”€ generate-pwmetrics-report.js
â”‚   â”œâ”€â”€ run-pa11y-report.js
â”‚   â”œâ”€â”€ find-chrome-path.js
â”‚   â””â”€â”€ optimize-video copy.js
â”œâ”€â”€ partials/             # Reusable HTML components (included at build time)
â”‚   â”œâ”€â”€ navbar.html       # Navigation component
â”‚   â””â”€â”€ footer.html       # Footer component
â”œâ”€â”€ reports/              # CI artefact placeholders (copied into dist/reports)
â”‚   â”œâ”€â”€ bundle-report.html
â”‚   â”œâ”€â”€ bundle-stats.json
â”‚   â”œâ”€â”€ coverage/
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”œâ”€â”€ lighthouse-report.html
â”‚   â”œâ”€â”€ media-inventory.html
â”‚   â”œâ”€â”€ performance-timeline.html
â”‚   â”œâ”€â”€ pwa-audit.html
â”‚   â”œâ”€â”€ seo-audit.html
â”‚   â””â”€â”€ stats.html
â”œâ”€â”€ robots.txt            # Search engine crawling rules
â”œâ”€â”€ sitemap.xml           # Sitemap for search engines (generated)
â”œâ”€â”€ .htaccess             # Apache security headers configuration
â”œâ”€â”€ _headers              # Netlify/Vercel security headers
â”œâ”€â”€ nginx.conf.example    # Nginx security headers example
â”œâ”€â”€ index.html            # Homepage (entry point)
â”œâ”€â”€ about.html            # About page (entry point)
â”œâ”€â”€ services.html         # Services page (entry point) âœ… EXISTS
â”œâ”€â”€ projects.html         # Projects page (entry point)
â”œâ”€â”€ pricing.html          # Pricing landing page (entry point)
â”œâ”€â”€ seo-services.html     # SEO services landing page (entry point)
â”œâ”€â”€ reports.html          # Operational reports dashboard (entry point)
â”œâ”€â”€ contact.html          # Contact page (entry point)
â”œâ”€â”€ README.md             # Project documentation
â”œâ”€â”€ package.json          # Node.js dependencies and scripts
â”œâ”€â”€ vite.config.js        # Vite build configuration (includes clean URLs middleware)
â”œâ”€â”€ vite-plugin-html-include.js # Custom Vite plugin for HTML includes
â”œâ”€â”€ .gitignore            # Git ignore rules
â”œâ”€â”€ logo.svg              # Main logo file (SVG, scalable)
â”œâ”€â”€ logo-1024x1024.png   # Logo (1024x1024, high-res)
â”œâ”€â”€ logo-150x150.png     # Logo (150x150, standard)
â”œâ”€â”€ favicon.ico           # Favicon (ICO fallback for legacy browsers)
â”œâ”€â”€ favicon.svg           # SVG favicon (modern browsers, scalable)
â”œâ”€â”€ favicon.png           # Generic favicon PNG (extra)
â”œâ”€â”€ favicon-96x96.png     # 96x96 favicon (extra)
â”œâ”€â”€ favicon-64x64.png     # 64x64 favicon (high-DPI displays)
â”œâ”€â”€ favicon-48x48.png     # 48x48 favicon
â”œâ”€â”€ favicon-32x32.png     # 32x32 favicon
â”œâ”€â”€ favicon-16x16.png     # 16x16 favicon
â”œâ”€â”€ apple-touch-icon.png  # Apple touch icon (180x180)
â”œâ”€â”€ android-chrome-192x192.png # Android Chrome icon (192x192)
â”œâ”€â”€ android-chrome-512x512.png # Android Chrome icon (512x512)
â”œâ”€â”€ safari-pinned-tab.svg # Safari pinned tab icon
â”œâ”€â”€ mstile-70x70.png      # Windows tile (small)
â”œâ”€â”€ mstile-150x150.png    # Windows tile (medium)
â”œâ”€â”€ mstile-310x150.png    # Windows tile (wide)
â”œâ”€â”€ mstile-310x310.png    # Windows tile (large)
â”œâ”€â”€ browserconfig.xml     # Windows tile configuration
â”œâ”€â”€ lighthouserc.json     # Lighthouse CI configuration (main, full categories)
â”œâ”€â”€ lighthouserc.pwa.json # Lighthouse CI configuration (PWA-only category)
â”œâ”€â”€ pwmetrics.config.cjs  # PWMetrics configuration (optional tooling)
â”œâ”€â”€ pa11y.config.json     # Pa11y configuration
â”œâ”€â”€ css/                  # Modular CSS files
â”‚   â”œâ”€â”€ main.css          # Main entry point
â”‚   â”œâ”€â”€ variables.css     # CSS custom properties
â”‚   â”œâ”€â”€ base.css          # Base/reset styles
â”‚   â”œâ”€â”€ fonts.css         # Self-hosted font declarations
â”‚   â”œâ”€â”€ critical.css      # Critical CSS (above-the-fold)
â”‚   â”œâ”€â”€ components/       # 20 component CSS files
â”‚   â”œâ”€â”€ pages/            # Page-specific styles (3 files)
â”‚   â”œâ”€â”€ easter-egg/       # âœ… EXISTS - Galaxy easter egg styles (dedicated folder)
â”‚   â”‚   â””â”€â”€ easter-egg.css # âœ… EXISTS - Black hole vortex and Milky Way scene styles
â”‚   â””â”€â”€ utils/            # Utility styles (9 files)
â”œâ”€â”€ css/legacy/           # Legacy CSS files (backup)
â”‚   â””â”€â”€ styles.css        # Original monolithic CSS
â”œâ”€â”€ js/                   # Modular JavaScript files
â”‚   â”œâ”€â”€ main.js           # Main entry point
â”‚   â”œâ”€â”€ core/             # Core functionality modules (10 modules)
â”‚   â”‚   â”œâ”€â”€ navigation.js
â”‚   â”‚   â”œâ”€â”€ scroll.js
â”‚   â”‚   â”œâ”€â”€ scroll-manager.js
â”‚   â”‚   â”œâ”€â”€ animations.js
â”‚   â”‚   â”œâ”€â”€ cursor.js
â”‚   â”‚   â”œâ”€â”€ mouse-tilt.js
â”‚   â”‚   â”œâ”€â”€ easter-egg.js
â”‚   â”‚   â”œâ”€â”€ page-transitions.js
â”‚   â”‚   â””â”€â”€ service-worker.js
â”‚   â”œâ”€â”€ utils/            # Utility modules (8 files)
â”‚   â”‚   â”œâ”€â”€ accessibility.js
â”‚   â”‚   â”œâ”€â”€ env.js
â”‚   â”‚   â”œâ”€â”€ error-handler.js
â”‚   â”‚   â”œâ”€â”€ interactions.js
â”‚   â”‚   â”œâ”€â”€ performance.js
â”‚   â”‚   â”œâ”€â”€ ripples-lazyload.js
â”‚   â”‚   â”œâ”€â”€ three-loader.js
â”‚   â”‚   â””â”€â”€ toast.js
â”‚   â””â”€â”€ pages/            # Page-specific scripts (2 files)
â”‚       â”œâ”€â”€ contact.js
â”‚       â””â”€â”€ services.js
â”œâ”€â”€ js/legacy/            # Legacy JavaScript files (backup)
â”‚   â””â”€â”€ script.js         # Original monolithic JS
â”œâ”€â”€ partials/             # Reusable HTML components
â”œâ”€â”€ assets/               # Static assets
â”‚   â”œâ”€â”€ fonts/            # Self-hosted fonts (WOFF2, subsetted)
â”‚   â”‚   â”œâ”€â”€ Orbitron/     # Orbitron font family
â”‚   â”‚   â””â”€â”€ Rajdhani/     # Rajdhani font family
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ backgrounds/  # Background images
â”‚   â”‚   â”œâ”€â”€ banners/      # Banner images
â”‚   â”‚   â”œâ”€â”€ logos/        # Logo images
â”‚   â”‚   â””â”€â”€ responsive/   # âœ… EXISTS - Responsive image variants (AVIF/WebP)
â”‚   â”œâ”€â”€ audio/            # âœ… EXISTS - Audio assets
â”‚   â”‚   â””â”€â”€ space-ambience-optimized.ogg # Space ambience for easter egg
â”‚   â””â”€â”€ video/
â”‚       â””â”€â”€ optimized/    # Pre-processed hero/background loops
â”œâ”€â”€ dist/                 # Production build output (generated by Vite)
â”œâ”€â”€ sw.js                 # Service worker (PWA/offline support)
â”œâ”€â”€ site.webmanifest      # PWA manifest
â”œâ”€â”€ robots.txt            # Search engine crawling rules
â”œâ”€â”€ sitemap.xml           # Sitemap for search engines (generated)
â”œâ”€â”€ .htaccess             # Apache security headers configuration
â”œâ”€â”€ _headers              # Netlify/Vercel security headers
â”œâ”€â”€ nginx.conf.example    # Nginx security headers example
â”œâ”€â”€ eslint.config.js      # ESLint configuration (ESLint v9 flat config)
â”œâ”€â”€ playwright.config.js  # Playwright smoke suite configuration
â”œâ”€â”€ .editorconfig         # Editor configuration
â”œâ”€â”€ .prettierrc           # Prettier configuration
â”œâ”€â”€ .prettierignore       # Prettier ignore rules
â”œâ”€â”€ .nvmrc                # Node.js version specification
â”œâ”€â”€ .gitattributes        # Git line ending normalization
â”œâ”€â”€ .npmrc                # npm configuration
â”œâ”€â”€ .vscode/              # VS Code workspace settings
â”‚   â”œâ”€â”€ settings.json
â”‚   â””â”€â”€ extensions.json
â””â”€â”€ CHANGELOG.md          # Version history and changes
```

---

## CSS Architecture (Modular)

### Current Status

- **Variables & Base:** âœ… Complete (`variables.css`, `base.css`)
- **Components:** âœ… Complete (20 component files)
- **Pages:** âœ… Complete (`about.css`, `contact.css`, `projects.css`)
- **Utils:** âœ… Complete (10 utility files)
- **Legacy:** âœ… Migrated - Files moved to `css/legacy/` for reference

**Migration Status:** âœ… **COMPLETE** - All CSS has been successfully migrated to modular structure. Legacy files are in `css/legacy/` for reference.

### Main Entry Point

- **`css/main.css`** - Main CSS file that imports all modules
  - **DO NOT edit this file directly** - It only contains @import statements
  - Uses modern `@import` syntax (without `url()`) for Vite compatibility
  - Also imported in `js/main.js` to ensure Vite processes nested imports correctly
  - All CSS should be in component/module files
  - All CSS files are complete and imported

### CSS Module Structure

```
css/
â”œâ”€â”€ main.css              # âœ… Main entry point (imports all modules)
â”œâ”€â”€ variables.css         # âœ… CSS custom properties (colors, spacing, etc.)
â”œâ”€â”€ base.css              # âœ… Reset, typography, foundational styles
â”œâ”€â”€ components/           # âœ… 20 Reusable UI components
â”‚   â”œâ”€â”€ navigation.css    # âœ… Navbar and navigation styles
â”‚   â”œâ”€â”€ hero.css          # âœ… Hero section styles
â”‚   â”œâ”€â”€ buttons.css       # âœ… Button styles and variants
â”‚   â”œâ”€â”€ cards/            # âœ… Card component modules (index.css imports all)
â”‚   â”‚   â”œâ”€â”€ index.css     # âœ… Main card component index
â”‚   â”‚   â”œâ”€â”€ _card-base.css
â”‚   â”‚   â”œâ”€â”€ _service-card.css
â”‚   â”‚   â”œâ”€â”€ _pricing-card.css
â”‚   â”‚   â”œâ”€â”€ _project-card.css
â”‚   â”‚   â””â”€â”€ ... (other card modules)
â”‚   â”œâ”€â”€ footer.css        # âœ… Footer styles
â”‚   â”œâ”€â”€ forms/            # âœ… Form component modules (index.css imports all)
â”‚   â”‚   â”œâ”€â”€ index.css     # âœ… Main form component index
â”‚   â”‚   â”œâ”€â”€ _form-base.css
â”‚   â”‚   â”œâ”€â”€ _form-inputs.css
â”‚   â”‚   â”œâ”€â”€ _form-validation.css
â”‚   â”‚   â””â”€â”€ _form-variants.css
â”‚   â”œâ”€â”€ cta.css           # âœ… Call-to-action section styles
â”‚   â”œâ”€â”€ parallax.css      # âœ… Parallax section styles
â”‚   â”œâ”€â”€ back-to-top.css   # âœ… Back-to-top button styles
â”‚   â”œâ”€â”€ modals.css        # âœ… Modal/dialog styles
â”‚   â”œâ”€â”€ alerts.css        # âœ… Alert/notification styles
â”‚   â”œâ”€â”€ badges.css        # âœ… Badge/label styles
â”‚   â”œâ”€â”€ tables.css        # âœ… Table styles
â”‚   â”œâ”€â”€ tabs.css          # âœ… Tab component styles
â”‚   â”œâ”€â”€ accordions.css    # âœ… Accordion/collapsible styles
â”‚   â”œâ”€â”€ tooltips.css      # âœ… Tooltip styles
â”‚   â”œâ”€â”€ typography.css    # âœ… Typography utilities (code, blockquote, etc.)
â”‚   â”œâ”€â”€ breadcrumbs.css   # âœ… Breadcrumb navigation styles
â”‚   â”œâ”€â”€ toast.css         # âœ… Toast notification styles
â”‚   â””â”€â”€ service-worker.css # âœ… Service worker update notification styles
â”œâ”€â”€ pages/                # âœ… Page-specific styles (4 files)
â”‚   â”œâ”€â”€ contact/          # âœ… Contact page modules (index.css imports all)
â”‚   â”‚   â”œâ”€â”€ index.css     # âœ… Main contact page index
â”‚   â”‚   â”œâ”€â”€ _contact-base.css
â”‚   â”‚   â”œâ”€â”€ _contact-form.css
â”‚   â”‚   â”œâ”€â”€ _contact-map.css
â”‚   â”‚   â””â”€â”€ ... (other contact modules)
â”‚   â”œâ”€â”€ projects/         # âœ… Projects page modules (index.css imports all)
â”‚   â”‚   â”œâ”€â”€ index.css     # âœ… Main projects page index
â”‚   â”‚   â”œâ”€â”€ _projects-grid.css
â”‚   â”‚   â””â”€â”€ _project-modal.css
â”‚   â”œâ”€â”€ about.css          # âœ… About page styles
â”‚   â””â”€â”€ reports.css        # âœ… Reports dashboard styles
â””â”€â”€ utils/                # âœ… 9 Utility styles and effects
    â”œâ”€â”€ animations.css    # âœ… All @keyframes and animation utilities
    â”œâ”€â”€ cursor.css        # âœ… Custom cursor and scroll progress
    â”œâ”€â”€ 3d-effects.css    # âœ… 3D transform effects
    â”œâ”€â”€ fluid-effects.css # âœ… Fluid morphing effects
    â”œâ”€â”€ responsive.css    # âœ… All @media queries (MUST BE LAST)
    â”œâ”€â”€ loading.css       # âœ… Loading spinners and overlays
    â”œâ”€â”€ empty-state.css   # âœ… Empty state styles
    â”œâ”€â”€ dividers.css      # âœ… Divider/separator styles
    â””â”€â”€ skip-link.css     # âœ… Skip link accessibility styles
â”œâ”€â”€ easter-egg/           # âœ… Galaxy easter egg styles (dedicated folder)
â”‚   â””â”€â”€ easter-egg.css    # âœ… Black hole vortex and Milky Way scene styles
```

**Note:** All CSS files are complete and migrated. Legacy `styles.css` is in `css/legacy/` for reference.

### CSS Import Order (Important!)

1. Variables (must be first - defines CSS custom properties)
2. Base styles (foundational styles)
3. Components (reusable UI elements)
4. Page-specific styles
5. Animations & Effects
6. Responsive (must be last - overrides for mobile/tablet)

### CSS Import Syntax

- **Use `@import './path.css'` syntax** (without `url()` wrapper)
- This ensures Vite processes nested imports correctly in development mode
- Example: `@import './components/navigation.css';` (not `@import url('./components/navigation.css');`)

### CSS Naming Conventions

- Use BEM-like naming: `.component`, `.component__element`, `.component--modifier`
- Use kebab-case for class names: `.service-card`, `.project-image`
- Prefix utility classes: `.scroll-reveal-3d`, `.fade-in-up`
- Use semantic names that describe purpose, not appearance

---

## JavaScript Architecture (Modular ES6)

### Current Status

- **âœ… Complete:** All JavaScript modules are fully implemented and functional
- **âœ… Migration:** JavaScript migration from legacy `script.js` is complete
- **All modules exist and are working:** core modules, utils, and page-specific modules

### Main Entry Point

- **`js/main.js`** - Main JavaScript file that imports and initializes all modules
  - Uses ES6 modules (`import`/`export`)
  - **Imports CSS:** `import '../css/main.css'` ensures Vite processes all nested CSS imports correctly
  - Initializes all core modules on DOMContentLoaded
  - Conditionally loads page-specific modules
  - **Note:** JavaScript architecture is complete and functional

### JavaScript Module Structure

```
js/
â”œâ”€â”€ main.js               # âœ… EXISTS - Main entry point (imports and initializes all modules)
â”œâ”€â”€ core/                 # âœ… EXISTS - Core functionality modules (10 modules)
â”‚   â”œâ”€â”€ navigation.js     # âœ… EXISTS - Navbar scroll effects, mobile menu toggle
â”‚   â”œâ”€â”€ scroll.js         # âœ… EXISTS - Scroll progress, parallax, smooth scroll, back-to-top
â”‚   â”œâ”€â”€ scroll-manager.js # âœ… EXISTS - Centralized scroll event handler
â”‚   â”œâ”€â”€ animations.js     # âœ… EXISTS - Scroll-triggered animations, reveals, fade-ins
â”‚   â”œâ”€â”€ cursor.js         # âœ… EXISTS - Custom cursor follow and dot effects
â”‚   â”œâ”€â”€ mouse-tilt.js      # âœ… EXISTS - 3D tilt effects on cards (desktop only)
â”‚   â”œâ”€â”€ page-transitions.js # âœ… EXISTS - Page transition animations
â”‚   â”œâ”€â”€ service-worker.js # âœ… EXISTS - Service worker registration and updates
â”‚   â””â”€â”€ three-hero.js     # âœ… EXISTS - Three.js hero background animations (different per page)
â”œâ”€â”€ easter-egg/           # âœ… EXISTS - Galaxy easter egg feature (dedicated folder)
â”‚   â”œâ”€â”€ easter-egg.js     # âœ… EXISTS - Easter egg trigger/initialization
â”‚   â”œâ”€â”€ runtime.js        # âœ… EXISTS - Milky Way 3D scene runtime (single wrapper UI hiding/restoration, navbar/footer handling)
â”‚   â”œâ”€â”€ celestial-textures.js # âœ… EXISTS - Procedural texture generation (THREE parameter, MIN_POLE_SCALE_THRESHOLD, pole-aware scaling, seamless noise, quadratic feature scaling)
â”‚   â”œâ”€â”€ texture-wrapping.js # âœ… EXISTS - Seamless texture wrapping utilities (featherPoles, isSafeForPolePlacement, multi-pixel blending)
â”‚   â”œâ”€â”€ procedural-noise.js # âœ… EXISTS - Procedural noise generation (fractal, seamless, 3D noise)
â”‚   â”œâ”€â”€ celestial-mechanics.js # âœ… EXISTS - Orbital mechanics (calculateKeplerianOrbitalSpeedApproximation, calculateLagrangePoints module purity, deltaTime support)
â”‚   â”œâ”€â”€ camera-controls.js # âœ… EXISTS - Camera animation and orbital controls (optimized THREE checks)
â”‚   â”œâ”€â”€ galaxy-generator.js # âœ… EXISTS - Multi-layer galaxy generation (spatial hash grid optimization for O(1) neighbor lookup)
â”‚   â”œâ”€â”€ star-field.js     # âœ… EXISTS - Background star field generation with twinkling (color buffer updates)
â”‚   â”œâ”€â”€ lighting-atmosphere.js # âœ… EXISTS - Dynamic lighting and atmospheric glow (initial camera position parameter)
â”‚   â”œâ”€â”€ nebula-clouds.js  # âœ… EXISTS - Nebula, star-forming regions, and interstellar medium
â”‚   â”œâ”€â”€ particle-effects.js # âœ… EXISTS - Asteroid belts, comets, solar wind (frame-rate independent with deltaTime, squared distance checks), space dust, space stations
â”‚   â””â”€â”€ post-processing.js # âœ… EXISTS - Post-processing effects (recursive raycasting, standardized imports, bloom, depth of field, motion blur)
â”œâ”€â”€ utils/                # âœ… EXISTS - Utility modules (11 files)
â”‚   â”œâ”€â”€ accessibility.js  # âœ… EXISTS - Accessibility utilities (focus management, ARIA announcements)
â”‚   â”œâ”€â”€ env.js            # âœ… EXISTS - Environment detection helpers (browser-safe)
â”‚   â”œâ”€â”€ error-handler.js  # âœ… EXISTS - Centralized error handling and logging
â”‚   â”œâ”€â”€ interactions.js   # âœ… EXISTS - Button hover effects, card interactions
â”‚   â”œâ”€â”€ performance.js    # âœ… EXISTS - Web Vitals tracking and performance monitoring
â”‚   â”œâ”€â”€ ripples-lazyload.js # âœ… EXISTS - Background video lazy loader (with loading="lazy" for videos)
â”‚   â”œâ”€â”€ three-loader.js   # âœ… EXISTS - Dynamic Three.js loader with SRI support
â”‚   â”œâ”€â”€ toast.js          # âœ… EXISTS - Toast notification system
â”‚   â”œâ”€â”€ dynamic-prefetch.js # âœ… EXISTS - Dynamic resource hints (prefetch on link hover/focus)
â”‚   â”œâ”€â”€ web-worker-helper.js # âœ… EXISTS - Web Worker utilities for offloading heavy computations
â”‚   â””â”€â”€ lazy-background-images.js # âœ… EXISTS - Lazy loads CSS background images when sections are near viewport (AVIF/WebP support)
â””â”€â”€ pages/                # âœ… EXISTS - Page-specific modules (4 files)
    â”œâ”€â”€ contact.js        # âœ… EXISTS - Contact form handling
    â”œâ”€â”€ services.js        # âœ… EXISTS - Service modals handling
    â”œâ”€â”€ projects.js        # âœ… EXISTS - Project details modal handling
    â””â”€â”€ reports.js        # âœ… EXISTS - Reports dashboard tabs & lazy loading
```

**Note:** All JavaScript modules are fully implemented and functional. The modular ES6 architecture is complete. Three.js hero backgrounds are initialized automatically based on page (particles for index, geometric shapes for services, torus grid for projects).

### JavaScript Patterns

- Each module exports an initialization function: `export function initModuleName()`
- Modules are independent and can work standalone
- Main.js imports and calls all init functions
- Use DOMContentLoaded or check for element existence before initialization
- Always check if elements exist before querying: `if (!element) return;`

### Example Module Structure

```javascript
/**
 * Module Name
 * Brief description of what this module does
 */

export function initModuleName() {
  // Check for required elements
  const element = document.querySelector('.element');
  if (!element) return;

  // Module functionality
  // ...
}
```

---

## HTML Structure

### HTML Files

- Each page is a separate HTML file in the root
- **Clean URLs:** All internal links use clean URLs without `.html` extensions (e.g., `/about` instead of `/about.html`)
  - Files on disk: `about.html`, `services.html` (required for static hosting)
  - Links in HTML: `/about`, `/services` (clean URLs)
  - URL rewriting handled by Vite middleware (dev/preview), `.htaccess` (Apache), or native support (GitHub Pages, Netlify, Vercel)
- All pages should include:
  - **Security Headers** - Meta tags for X-Frame-Options, CSP, etc.
  - **SEO Meta Tags** - Open Graph, Twitter Cards, descriptions (use clean URLs in `og:url`, `twitter:url`, canonical)
  - **Structured Data** - JSON-LD schemas (Organization, WebSite, etc.) with clean URLs
  - **Resource Hints** - Modulepreload for critical ES modules (`main.js`, `core/navigation.js`), preconnect for third-party resources (Plausible analytics)
  - **Font Preload** - Preload critical fonts (Orbitron Regular, Rajdhani Regular) with `crossorigin="anonymous"`
  - **Favicons** - Complete favicon block with SVG, PNG sizes, ICO fallback, Apple Touch Icon, Windows Tiles, Safari Pinned Tab, and Web App Manifest (see template below)
  - **Accessibility** - Skip link, ARIA live region
  - **Main Content ID** - `<main id="main-content">` wrapper
  - Navigation - Use `<!-- include partials/navbar.html -->` (processed at build time)
  - Cursor effects (scroll progress, custom cursor)
  - Footer - Use `<!-- include partials/footer.html -->` (processed at build time)
  - Script tag pointing to `js/main.js` with `type="module"`
  - **Analytics Loading** - Plausible analytics script loaded after page load event (reduces impact on Core Web Vitals)
  - **Inline page-transition preload script** â€“ inserted near the top of `<head>` so blur/fade animations don't flash when navigating between pages. Use the snippet below on every entry point.

### HTML Partials (Reusable Components)

```
partials/
â”œâ”€â”€ navbar.html           # âœ… EXISTS - Navigation component (included at build time)
â””â”€â”€ footer.html           # âœ… EXISTS - Footer component (included at build time)
```

**Note:** Navigation and footer are modularized and included via the HTML include system. Use `<!-- include partials/navbar.html -->` and `<!-- include partials/footer.html -->` in HTML files. The Vite plugin (`vite-plugin-html-include.js`) processes these includes at build time. Active navigation states are handled dynamically by `js/core/navigation.js`, so no page-specific variants are needed.

**Legacy template files (deprecated, can be deleted):**

- `seo-meta.html` - SEO meta tags are hardcoded in HTML files
- `security-headers.html` - Security headers are hardcoded in HTML files
- `structured-data.html` - Structured data is hardcoded in HTML files
- `accessibility.html` - Accessibility features are hardcoded in HTML files and handled by `js/utils/accessibility.js`

### Assets Structure

```
assets/
â”œâ”€â”€ fonts/                # Self-hosted fonts (WOFF2, subsetted)
â”‚   â”œâ”€â”€ Orbitron/        # Orbitron font family
â”‚   â””â”€â”€ Rajdhani/        # Rajdhani font family
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ backgrounds/      # Background images
â”‚   â”œâ”€â”€ banners/          # Banner images
â”‚   â”œâ”€â”€ logos/            # Logo images
â”‚   â”œâ”€â”€ portfolio/        # Portfolio project images
â”‚   â””â”€â”€ responsive/       # Responsive image variants (AVIF/WebP)
â”œâ”€â”€ audio/                # Audio assets
â”‚   â””â”€â”€ space-ambience-optimized.ogg # Space ambience for easter egg
â””â”€â”€ video/
    â””â”€â”€ optimized/        # Pre-processed hero/background loops
```

**Note:** Navigation and footer are included via the HTML include system. Use `<!-- include partials/navbar.html -->` and `<!-- include partials/footer.html -->` in HTML files. The custom Vite plugin (`vite-plugin-html-include.js`) processes these includes at build time, replacing the comments with the actual file contents. This ensures consistent navigation and footer across all pages while maintaining a single source of truth.

### HTML Template Structure

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Page Title - Logi-Ink</title>

    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <!-- ... more security headers ... -->

    <!-- SEO Meta Tags -->
    <meta name="description" content="Page description" />
    <!-- Open Graph tags -->
    <!-- Twitter Card tags -->

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        ...
      }
    </script>

    <!-- Preload critical fonts (self-hosted WOFF2 - Subsetted) -->
    <link
      rel="preload"
      href="./assets/fonts/Orbitron/woff2/Orbitron-Regular-subset.woff2"
      as="font"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="./assets/fonts/Rajdhani/woff2/Rajdhani-Regular-subset.woff2"
      as="font"
      crossorigin="anonymous"
    />

    <!-- Modulepreload for critical ES modules -->
    <link rel="modulepreload" href="./js/main.js" />
    <link rel="modulepreload" href="./js/core/navigation.js" />

    <!-- Preconnect for third-party resources -->
    <link rel="preconnect" href="https://plausible.io" crossorigin />

    <!-- Favicons -->
    <!-- SVG favicon (modern browsers) -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <!-- PNG favicons (ordered from largest to smallest) -->
    <link rel="icon" type="image/png" sizes="64x64" href="/favicon-64x64.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <!-- ICO fallback (legacy browsers) -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <!-- Windows Tiles -->
    <meta name="msapplication-TileColor" content="#00ffff" />
    <meta name="msapplication-TileImage" content="/mstile-150x150.png" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <!-- Safari Pinned Tab -->
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00ffff" />
    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="stylesheet" href="css/main.css" />
    <!-- ... -->
  </head>
  <body>
    <!-- Accessibility: Skip to Content Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- ARIA Live Region for announcements -->
    <div id="aria-live-region" aria-live="polite" aria-atomic="true" class="sr-only"></div>

    <!-- include partials/navbar.html -->

    <!-- Main Content -->
    <main id="main-content">
      <!-- Page Content -->
    </main>

    <!-- include partials/footer.html -->

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top" aria-label="Back to top"></a>

    <script type="module" src="js/main.js"></script>

    <!-- Load analytics after page load to reduce impact on Core Web Vitals -->
    <script>
      window.addEventListener('load', () => {
        const script = document.createElement('script');
        script.defer = true;
        script.src = 'https://plausible.io/js/script.js';
        script.setAttribute('data-domain', 'logi-ink.com');
        document.head.appendChild(script);
      });
    </script>
  </body>
</html>
```

### Page Transition Preload Snippet

Paste this snippet immediately after the CSP meta tag (or before SEO meta) in each page's `<head>` block:

```html
<script>
  if (sessionStorage.getItem('logiInk:pendingTransition')) {
    document.documentElement.classList.add('page-transition-preload');
    sessionStorage.removeItem('logiInk:pendingTransition');
  }
</script>
```

> âš ï¸ Required for every entry page. Without it, the blur/fade transition will flash on load because the new sessionStorage-driven transition system depends on the preload class being applied before the body paints.

---

## Color Palette & Design Tokens

### Primary Colors

- `--bg-primary: #0a0a0a` - Deep Black (main background)
- `--bg-secondary: #1a1a2e` - Dark Blue-Black (cards, sections)
- `--bg-tertiary: #16213e` - Navy Blue (tertiary backgrounds)

### Accent Colors

- `--accent-cyan: #00ffff` - Electric Cyan (primary accent, primary buttons)
- `--accent-cyan-dark: #00cccc` - Darker cyan variant
- `--accent-magenta: #ff00ff` - Hot Magenta (secondary accent)
- `--accent-magenta-light: #ed12ff` - Lighter magenta variant
- `--accent-magenta-dark: #cc00cc` - Darker magenta variant
- `--accent-green: #00ff00` - Electric Green (success states)
- `--accent-green-dark: #00cc00` - Darker green variant
- `--accent-blue: #0066ff` - Electric Blue (info states)
- `--accent-blue-dark: #0052cc` - Darker blue variant
- `--accent-pink: #ff0080` - Hot Pink (error states)
- `--accent-pink-dark: #cc0066` - Darker pink variant
- `--accent-yellow: #ffff00` - Electric Yellow
- `--accent-gold: #ffb347` - Neon Gold (iteration highlights)

**Important:** All accent color variables are defined with actual hex values in `css/variables.css`. Never use circular references like `var(--accent-cyan)` when defining `--accent-cyan` itself.

### Text Colors

- `--text-primary: #ffffff` - White (primary text)
- `--text-secondary: #b0b0b0` - Light Gray (secondary text)
- `--text-muted: #666666` - Gray (muted text)

### Glow Variables

- Each accent color has a corresponding glow variable: `--glow-cyan`, `--glow-magenta`, etc.
- Defined in `css/variables.css`

**All colors should use CSS variables - never hardcode hex values!**

---

## Typography

### Font Families

- **Headings & Display:** `'Orbitron', sans-serif`
- **Body Text & UI:** `'Rajdhani', sans-serif`

### Font Loading Strategy

- **Critical fonts** (Orbitron Regular, Rajdhani Regular): Use `font-display: swap` for faster display
- **Non-critical variants** (Bold, Black, Light, SemiBold): Use `font-display: optional` to prevent layout shift
- Fonts are preloaded in HTML head with `crossorigin="anonymous"`
- Defined in `css/fonts.css` with appropriate `font-display` values

### Font Sizes

- Use `clamp()` for responsive typography
- Hero titles: `clamp(3rem, 8vw, 6rem)`
- Section titles: `clamp(2rem, 5vw, 3.5rem)`
- Body text: `1rem` base size

---

## Responsive Breakpoints

### Breakpoints (defined in `css/utils/responsive.css`)

- **Mobile:** `max-width: 768px`
- **Tablet:** `769px - 1024px`
- **Desktop:** `min-width: 1025px`
- **Small Mobile:** `max-width: 480px`

### Mobile-First Approach

- Base styles are for mobile
- Use `min-width` media queries for larger screens
- Test on actual devices when possible

---

## Component Guidelines

### Buttons

- Use `.btn` base class
- Variants: `.btn-primary`, `.btn-secondary`, `.btn-outline`
- Size modifiers: `.btn-large`
- Always include hover and focus states

### Cards

- Service cards: `.service-card`
- Project cards: `.project-card` or `.project-card-large`
- Always include hover effects
- Use `.mouse-tilt-container` for 3D tilt effects

### Forms

- Use `.form-group` wrapper for each input
- Always include labels
- Include error/success states: `.form-group.error`, `.form-group.success`
- Use `.form-submit` for submit buttons

---

## Animation Guidelines

### Scroll Animations

- Use `.fade-in-up` class for elements that fade in on scroll
- Use `.scroll-reveal-3d` for 3D reveal effects
- Use `.text-reveal` for text reveal animations
- Animations should be subtle and performant

### Hover Effects

- Keep hover effects smooth (0.3s transitions)
- Use transform for performance (translateY, scale)
- Add glow effects on hover for interactive elements

### Performance

- Use `transform` and `opacity` for animations (GPU-accelerated)
- Avoid animating `width`, `height`, `top`, `left` (causes reflow)
- Use `will-change` sparingly

---

## Code Quality Standards

### General

- Use consistent indentation (2 or 4 spaces - check existing code)
- Add comments for complex logic
- Use semantic HTML elements
- Follow accessibility best practices (ARIA labels, alt text, etc.)

### CSS

- One rule per line
- Use meaningful class names
- Group related properties
- Use CSS variables for values used multiple times
- Keep specificity low (avoid !important)

### JavaScript

- Use ES6+ features (const/let, arrow functions, modules)
- Check for element existence before querying
- Use event delegation when appropriate
- Keep functions small and focused (single responsibility)
- Add JSDoc comments for exported functions

### Code Commenting:

# Commenting and Code Style Standards

When writing or modifying code:

1. **Comment with purpose, not redundancy**
   - Only comment _why_ something is done if it is not obvious from the code.
   - Do not comment what the code does if it is already clear from the code itself.
   - Comments should clarify intent, rationale, edge cases, assumptions, and decisions.

2. **Function, Class, and Module Headers**
   Every function, class, or module must include a short header comment describing:
   - What it is responsible for
   - Its inputs and outputs
   - Any side effects or external dependencies

   Example:
   // Fetches user details from the DB and caches the result for 5 minutes.
   // Returns null if no user is found.

3. **Document Non-Obvious Logic**
   When code includes:

- Complex logic
- Performance optimizations
- Workarounds for library quirks
- Assumptions that must remain true
  Always include a short explanatory comment.

4. **Consistent Style and Naming**

- Use descriptive, intention-revealing variable and function names.
- Avoid abbreviations unless widely recognized (e.g., `id`, `url`, `env`).
- Functions should do one thing, and their name should reflect it.

5. **Use TODO / NOTE / FIXME Standard Tags**
   / TODO: Implement pagination.
   // NOTE: This function assumes dates are UTC.
   // FIXME: Rewrite for performance; currently O(n^2).

6. **No Dead or Commented-Out Code**
   If code is removed, remove it fully. Do not leave commented-out blocks.
   If code must be kept for reference, explain why and for how long.

7. **Style Consistency**
   Match the project's existing:

- Formatting
- Indentation
- Naming conventions
- Folder organization

If new code introduces a new pattern, update the documentation and architecture notes accordingly.

8. **Always Re-Check `./.cursor/rules/cursorrules.mdc`**
   Before committing or submitting code:

- Confirm code comments, naming, and structure align with these standards.
- Update this rules file if the standards evolve.

---

## File Organization Rules

### Adding New Components

1. Create CSS file in `css/components/component-name.css`
2. Import it in `css/main.css`
3. If it needs JS, create module in `js/core/` or `js/utils/`
4. Export init function and import in `js/main.js`
5. **Update this file** (`.cursor/rules/cursorrules.mdc`) with the new component

### Adding New Pages

1. Create HTML file in root (e.g., `new-page.html`)
2. **Use clean URLs in all links:** Link to `/new-page` (not `/new-page.html`)
3. **Update SEO metadata:** Use clean URLs in canonical, Open Graph, and Twitter Card URLs
4. Create page-specific CSS in `css/pages/page-name.css` if needed
5. Create page-specific JS in `js/pages/page-name.js` if needed
6. Import CSS in `css/main.css`
7. Conditionally initialize JS in `js/main.js` (check for clean URL pathname)
8. Include the **page-transition preload script** in the `<head>` (see snippet above)
9. Update `scripts/generate-sitemap.js` to include the new page with clean URL
10. **Update this file** (`.cursor/rules/cursorrules.mdc`) with the new page

### Modifying Existing Files

- Keep changes focused and isolated
- If a component grows too large, consider splitting it
- Update comments if behavior changes significantly
- **Update this file** (`.cursor/rules/cursorrules.mdc`) if structure changes

---

## Common Tasks

### Adding a New Service Card

1. Add HTML in services.html or index.html
2. Use `.service-card` class structure
3. Styles are already defined in `css/components/cards.css`
4. JavaScript interactions in `js/utils/interactions.js`

### Adding a New Project

1. Add HTML in projects.html
2. Use `.project-card` class structure
3. Add project image to `assets/images/projects/`
4. Styles in `css/components/cards.css`

### Modifying Colors

1. **Only modify `css/variables.css`**
2. Update the CSS variable value
3. All components will automatically use the new color

### Adding a New Animation

1. Add CSS animation in `css/utils/animations.css`
2. If it needs JS triggers, add to `js/core/animations.js`
3. Document the animation in comments

### Running Automated QA

1. Ensure Playwright browsers are installed with `npx playwright install` (one-time setup)
2. Run the smoke suite with `npm run test:e2e` (builds the site before executing tests)
3. The suite covers primary navigation, mobile navigation drawer, back-to-top + scroll progress, services modals (including Escape handling), contact form validation (happy path and failures), and service worker registration

---

## Performance Considerations

### CSS

- Use `@import` for organization (will be bundled in production)
- Minimize use of complex selectors
- Use CSS containment where appropriate

### JavaScript

- Modules are loaded as ES6 modules (browsers handle optimization)
- Consider lazy loading for page-specific modules
- Debounce scroll/resize event handlers

### Assets

- Optimize images before adding to `assets/`
- Use appropriate formats (WebP/AVIF with fallbacks)
- Lazy load images below the fold with `loading="lazy"`
- Add `fetchpriority="high"` to LCP candidates (hero images, above-the-fold)
- Add `fetchpriority="low"` to below-the-fold images
- Use `decoding="async"` for non-critical images, `decoding="sync"` for LCP candidates
- Videos should use `loading="lazy"` for below-the-fold content

---

## Browser Support

### Target Browsers

- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

### Modern Features Used

- CSS Variables (Custom Properties)
- ES6 Modules
- CSS Grid & Flexbox
- Intersection Observer API
- CSS Animations & Transforms

### Fallbacks

- CSS Grid falls back to Flexbox (automatic)
- Older browsers without ES6 modules will need a bundler
- CSS Variables need fallback values for very old browsers

---

## Debugging Tips

### CSS Issues

- Check browser DevTools for computed styles
- Verify CSS variables are defined in `variables.css`
- Check import order in `main.css`
- Look for specificity conflicts

### JavaScript Issues

- Check browser console for errors
- Verify modules are loaded (Network tab)
- Check if elements exist before querying
- Use `console.log` for debugging (remove before commit)

### Layout Issues

- Check container widths and max-widths
- Verify responsive breakpoints
- Test on different screen sizes
- Check for CSS Grid/Flexbox conflicts

---

## Git Workflow (if using version control)

### Commit Messages

- Use descriptive commit messages
- Mention which files/components were changed
- Reference issue numbers if applicable

### Before Committing

- Test all pages
- Check responsive layouts
- Verify JavaScript functionality
- **Update `.cursor/rules/cursorrules.mdc` if structure changed**

---

## Future Improvements

### Potential Enhancements

- Build system (Vite, Webpack, or Parcel) for bundling
- CSS preprocessor (Sass/SCSS) for better organization
- Template engine for HTML partials (Handlebars, Nunjucks)
- Component-based architecture (React, Vue, or Web Components)
- Image optimization pipeline
- Critical CSS extraction
- Service Worker for offline support

### Build System

- **Vite** is configured for development and production builds
- CSS and JS are automatically bundled and minified during production build
- **Vite plugins** for asset copying:
  - `copy-favicons` - Copies all favicon files (SVG, PNG sizes, ICO, Apple Touch, Android Chrome, Safari pinned tab, Windows tiles, browserconfig.xml, site.webmanifest) to dist root
  - `copy-logos` - Copies logo files (logo.svg, logo-1024x1024.png, logo-150x150.png) to dist root
  - `copy-videos` - Copies optimized video files to `dist/assets/video/optimized/`
  - `copy-audio` - Copies audio files to `dist/assets/audio/`
  - `copy-static-reports` - Copies reports directory to `dist/reports/`
- Image optimization scripts available (`npm run optimize-images`)
- Responsive image generation available (`npm run responsive-images`)
- Font subsetting script available (`npm run subset-fonts`)
- Critical CSS inlining script available (`npm run inline-critical-css`)
- Sitemap generation script available (`npm run generate-sitemap`)

### Performance Optimizations

- âœ… **Service Worker / PWA** - Offline support and faster repeat visits
- âœ… **Self-Hosted Fonts** - Subsetted WOFF2 fonts for faster loading
- âœ… **Critical CSS** - Inlined above-the-fold styles
- âœ… **Image Optimization** - Manual optimization via `npm run optimize-images` and `npm run responsive-images` scripts (Sharp-based)
- âœ… **Code Splitting** - Manual chunks for better caching
- âœ… **CSS Purging** - PurgeCSS is disabled (no CSS purging)
- âœ… **CSS Minification** - Disabled in Vite config (`cssMinify: false`)
- âœ… **CSS Code Splitting** - Disabled in Vite config (`cssCodeSplit: false`)
- âœ… **Compression** - Gzip and Brotli compression
- âœ… **Bundle Analysis** - Visual bundle analysis (`dist/stats.html`)
- âœ… **Web Vitals Tracking** - Performance monitoring (LCP, CLS, INP) via `web-vitals` â†’ Plausible
- âœ… **Dynamic Three.js Loading** - Loads only when needed (easter egg, pre-loaded for faster activation)
- âœ… **Hero Video Lazy-Load** - `ripples-lazyload.js` selects the optimal background video source per device/connection, with `loading="lazy"` for below-the-fold videos
- âœ… **Dynamic Resource Hints** - `dynamic-prefetch.js` prefetches pages on link hover/focus instead of static prefetch
- âœ… **Web Worker Utilities** - `web-worker-helper.js` provides utilities for offloading heavy computations
- âœ… **Optimized Font Loading** - `font-display: swap` for critical fonts, `font-display: optional` for non-critical variants
- âœ… **Image Fetch Priority** - `fetchpriority` attributes for LCP optimization
- âœ… **Image Decoding** - `decoding` attributes to prevent main thread blocking
- âœ… **Service Worker Cache Strategy** - Stale-while-revalidate for hashed assets, cache-first for static assets
- âœ… **Modulepreload** - Critical ES modules preloaded for faster parsing
- âœ… **Analytics Optimization** - Plausible loads after page load to reduce Core Web Vitals impact
- âœ… **Error Handling** - Centralized error handling with graceful degradation
- âœ… **Mobile Performance** - Optimized animations and effects for mobile devices
- âœ… **Texture Loading Optimization** - Lower initial resolution (0.5x) for faster galaxy loading, texture caching
- âœ… **Optimized Particle Generation** - Pre-calculated random values, optimized loops for galaxy generation
- âœ… **Modular Texture System** - Separated texture wrapping and noise generation for maintainability

### Current Limitations

- HTML partials are manually included (copy/paste)
- Automated coverage limited to Playwright smoke tests (consider broader unit/integration suites)
- No template engine (consider Handlebars/Nunjucks for HTML partials)

## Security & SEO Features

### Security Headers

- âœ… **Meta Tags** - Security headers in HTML (X-Frame-Options, CSP, etc.)
- âœ… **Content Security Policy** - CSP meta tags on all pages
- âœ… **Server Configuration** - `.htaccess` (Apache), `_headers` (Netlify/Vercel), `nginx.conf.example` (Nginx)
- âœ… **Subresource Integrity** - SRI infrastructure ready for CDN resources
- âœ… **Documentation** - See `docs/SERVER_SECURITY_HEADERS.md` for configuration

### SEO Optimization

- âœ… **Meta Tags** - Open Graph, Twitter Cards, descriptions on all pages
- âœ… **Structured Data** - JSON-LD schemas (Organization with logo.svg, WebSite, Service, BreadcrumbList, FAQPage, ContactPage)
- âœ… **Canonical URLs** - Added to all pages for SEO
- âœ… **Sitemap** - Auto-generated `sitemap.xml` (run `npm run generate-sitemap`)
- âœ… **Robots.txt** - Search engine crawling rules
- âœ… **Plausible Analytics** - Privacy-first analytics script loaded after page load event (reduces Core Web Vitals impact), with preconnect for early connection
- âœ… **Favicons** - Comprehensive favicon implementation with SVG, multiple PNG sizes (16x16, 32x32, 48x48, 64x64, 96x96), ICO fallback, Apple Touch Icon, Windows Tiles (browserconfig.xml), Safari Pinned Tab, and Web App Manifest integration. All favicon files are automatically copied to dist root during builds.
- âœ… **Logos** - Logo files (logo.svg, logo-1024x1024.png, logo-150x150.png) are automatically copied to dist root during builds. Structured data references logo.svg.
- âœ… **Documentation** - See `docs/SEO_AND_SECURITY_IMPLEMENTATION.md` for details

### Accessibility

- âœ… **Skip Links** - Keyboard navigation skip to content
- âœ… **ARIA Live Regions** - Screen reader announcements
- âœ… **Focus Management** - Keyboard navigation and focus trapping
- âœ… **ARIA Labels** - Enhanced ARIA labels and roles throughout
- âœ… **Keyboard Navigation** - Full keyboard support with focus management
- âœ… **Reduced Motion** - Respects `prefers-reduced-motion` media query
- âœ… **Accessibility Utilities** - `js/utils/accessibility.js` for enhanced accessibility

### Scripts & Tools

- âœ… **optimize-images.js** - Lossy compression and reporting for existing assets
- âœ… **optimize-video.js** - Transcode hero loops and generate poster frames
- âœ… **convert-poster-formats.js** - Convert poster frames to multiple formats
- âœ… **generate-responsive-images.js** - Produce AVIF/WebP responsive sets with HTML snippets
- âœ… **inline-critical-css.js** - Extract and inline above-the-fold styles post-build
- âœ… **subset-fonts.js** / `subset-fonts-with-glyphhanger.*` - Font usage analysis & subsetting helpers
- âœ… **generate-sitemap.js** - Regenerate sitemap.xml
- âœ… **generate-seo-meta.js** - SEO meta tags helper
- âœ… **generate-structured-data.js** - Structured data helper
- âœ… **generate-media-inventory.js** - Produces reports/media-inventory.{html,json}
- âœ… **generate-dashboard-reports.js** - Orchestrate preview, Lighthouse (main + PWA) and Pa11y, sync HTML reports
- âœ… **generate-coverage-report.js** - Regenerate synthetic route coverage snapshot
- âœ… **generate-performance-timeline.js** - Build performance timeline from latest Lighthouse JSON
- âœ… **generate-pwmetrics-report.js** - Run PWMetrics and emit reports
- âœ… **run-pa11y-report.js** - Run Pa11y accessibility audit
- âœ… **update-html-seo.js** - Batch-update SEO metadata in HTML files
- âœ… **find-chrome-path.js** - Helper to find Chrome executable path
- âœ… **accessibility.js** - Accessibility utilities module
- âœ… **easter-egg/** - Dedicated folder for galaxy easter egg feature (13 modules)
  - `easter-egg.js` - Trigger/initialization
  - `runtime.js` - Milky Way 3D scene runtime (UI hiding/restoration with single wrapper approach, navbar/footer handling)
  - `celestial-textures.js` - Procedural texture generation for sun, planets, moons (THREE parameter support, MIN_POLE_SCALE_THRESHOLD constant, pole-aware scaling, seamless noise, quadratic feature scaling, advanced blending)
  - `texture-wrapping.js` - Seamless texture wrapping utilities (featherPoles for pole distortion, isSafeForPolePlacement, multi-pixel blending)
  - `procedural-noise.js` - Procedural noise generation (fractal, seamless, 3D noise support)
  - `celestial-mechanics.js` - Orbital mechanics (calculateKeplerianOrbitalSpeedApproximation, calculateLagrangePoints returns plain objects for module purity, deltaTime support, frame-rate independent)
  - `camera-controls.js` - Camera animation and orbital controls (removed redundant THREE checks)
  - `galaxy-generator.js` - Multi-layer galaxy generation with density wave theory (spatial hash grid optimization for O(1) neighbor lookup)
  - `star-field.js` - Background star field generation with twinkling (color buffer update notifications)
  - `lighting-atmosphere.js` - Dynamic lighting and atmospheric glow effects (initial camera position parameter to prevent first-frame glitches)
  - `nebula-clouds.js` - Nebula, star-forming regions, and interstellar medium
  - `particle-effects.js` - Asteroid belts, comets, solar wind (frame-rate independent with deltaTime, squared distance checks), space dust, space stations
  - `post-processing.js` - Post-processing effects (recursive raycasting for accurate DoF, standardized ES module imports, bloom, depth of field, motion blur)

### NPM Scripts (reporting helpers)

- `npm run reports:lighthouse` â€“ runs Lighthouse CI using `lighthouserc.json` (HTML + JSON into `.lighthouseci`).
- `npm run reports:pa11y` â€“ runs Pa11y and emits `reports/seo-pa11y.html`.
- `npm run reports:coverage` â€“ regenerates the synthetic route coverage snapshot at `reports/coverage/index.html`.
- `npm run reports:performance` â€“ regenerates `reports/performance-timeline.html` from the latest Lighthouse JSON.
- `npm run reports:media` â€“ rebuilds media inventory HTML/JSON.
- `npm run reports:dashboard` â€“ orchestrates preview, Lighthouse (main + PWA) and Pa11y, and syncs HTML reports into `reports/`.
- `npm run reports:all` â€“ end-to-end refresh: build â†’ `reports:dashboard` â†’ `reports:media` â†’ `test:e2e:only` â†’ `reports:coverage` â†’ `reports:performance` â†’ final build.

---

## Getting Help

### Documentation Files

- **`README.md`** - Project overview, quick start guide, and setup instructions
- **`docs/BUILD_AND_DEPLOY.md`** - Build, deployment, and clean URLs guide
- **`docs/QUICK_START.md`** - Quick reference guide
- **`docs/project_commands.md`** - Common commands and tasks reference
- **`docs/STYLE_GUIDE.md`** - Design system, component markup, and accessibility notes
- **`docs/README.md`** - Documentation index + navigation
- **`docs/TODO.MD`** - Outstanding analytics/documentation follow-ups
- **`docs/IMAGE_GENERATION_PROMPTS.md`** - Creative direction prompts for imagery
- **`docs/VIDEO_BACKGROUND_GUIDE.md`** - Workflow for sourcing and optimising hero videos
- **`docs/PERFORMANCE_OPTIMIZATION_ANALYSIS.md`** - Performance optimization recommendations and analysis
- **`docs/AUDIO_CDN_RECOMMENDATIONS.md`** - Audio asset optimization and CDN recommendations
- **`docs/SOCIAL_MEDIA_IMAGE_GENERATORS.md`** - Guide for generating OG and Twitter Card images
- **This file (`.cursor/rules/cursorrules.mdc`)** - Project structure and conventions (MUST READ FIRST)

### When Stuck

1. Check relevant documentation file
2. Look at existing similar components for examples
3. Check browser console for errors
4. Verify file paths and imports are correct
5. Review `.cursor/rules/cursorrules.mdc` for project structure and conventions

---

## Quick Reference

### File Locations

- **Navigation styles:** `css/components/navigation.css`
- **Navigation JS:** `js/core/navigation.js`
- **Color variables:** `css/variables.css`
- **Responsive styles:** `css/utils/responsive.css`
- **Button styles:** `css/components/buttons.css`
- **Card styles:** `css/components/cards/index.css` (includes `offer-panel` layout for services page)

### Common Classes

- `.container` - Main content container (max-width: 1400px)
- `.section-title` - Section heading style
- `.btn-primary` - Primary button style
- `.service-card` - Service card component
- `.project-card` - Project card component
- `.scroll-reveal-3d` - 3D scroll reveal animation

### Common IDs

- `#navbar` - Navigation bar
- `#navMenu` - Navigation menu (mobile)
- `#hamburger` - Mobile menu toggle
- `#contactForm` - Contact form

---

## ğŸš¨ REMINDER: READ THIS FILE FIRST ğŸš¨

**If you're an AI agent reading this:**

- **You MUST read this entire file before starting ANY task**
- **This file contains ALL project rules, structure, and conventions**
- **Do NOT proceed with user requests until you've fully understood this file**
- **This file is your PRIMARY reference for ALL decisions about file structure, naming, and code organization**

---

**Last Updated:** 2025-01-30 (Clean URLs implementation: all internal links now use clean URLs without .html extensions, Vite middleware for dev/preview, .htaccess rewrite rules for Apache, updated sitemap and SEO metadata, JavaScript modules updated to handle clean URLs)
**Migration Status:** âœ… Complete - All CSS/JS migrated, build system configured, HTML includes implemented
**Component Count:** 20 CSS components, 9 core JS modules (including three-hero), 11 JS utils (accessibility.js, env.js, error-handler.js, interactions.js, performance.js, ripples-lazyload.js, three-loader.js, toast.js, dynamic-prefetch.js, web-worker-helper.js, lazy-background-images.js), 1 JS easter-egg folder (13 modules: easter-egg.js, runtime.js, celestial-textures.js, texture-wrapping.js, procedural-noise.js, celestial-mechanics.js, camera-controls.js, galaxy-generator.js, star-field.js, lighting-atmosphere.js, nebula-clouds.js, particle-effects.js, post-processing.js), 4 JS pages, 4 CSS pages, 9 utility CSS files, 1 CSS easter-egg folder, 2 HTML partials (navbar, footer)
**Performance:** âœ… Service Worker (optimized cache strategy: stale-while-revalidate for hashed assets, cache-first for static), Self-Hosted Fonts (optimized font-display: swap for critical, optional for non-critical), Critical CSS, Image Optimization (fetchpriority, decoding attributes), Code Splitting, CSS Purging (disabled), CSS Minification (disabled), CSS Code Splitting (disabled), Compression (Gzip/Brotli), Web Vitals Tracking (LCP, CLS, INP via `web-vitals` â†’ Plausible), Dynamic Three.js Loading (pre-loaded), Error Handling, Mobile Performance, Texture Loading Optimization, Optimized Particle Generation, Dynamic Resource Hints (prefetch on hover/focus), Modulepreload for critical ES modules, Analytics loaded after page load, Video lazy loading
**Security & SEO:** âœ… Security Headers, CSP, SRI Infrastructure, SEO Meta Tags, Structured Data (FAQ, Contact, Organization logo.svg), Canonical URLs, Accessibility Features, Sitemap, Robots.txt, Comprehensive Favicon Implementation (SVG, PNG sizes including extras, ICO, Apple Touch, Windows Tiles, Safari Pinned Tab), Logo Files (logo.svg, logo-1024x1024.png, logo-150x150.png)
**Configuration Files:** âœ… ESLint v9 (flat config), Prettier, EditorConfig, Git Attributes, VS Code Settings, browserconfig.xml
**Recent Updates:** âœ… **Clean URLs** (all internal links use clean URLs without .html extensions, Vite middleware for dev/preview, .htaccess for Apache, GitHub Pages native support, updated sitemap and SEO metadata), **CSS import syntax modernization** (changed from `@import url()` to `@import` for Vite compatibility), **CSS import in JS** (added `import '../css/main.css'` to js/main.js to ensure Vite processes nested imports), **CSS variables fix** (removed circular references, all accent colors now have actual hex values), **Component modularization** (cards, forms, contact, and projects pages now use subdirectories with index.css files for better organization), **HTML include plugin** (removed verbose logging for cleaner dev output), HTML include system (Vite plugin for processing `<!-- include partials/... -->` comments at build time), modularized navbar and footer partials, comprehensive favicon implementation, sessionStorage-backed page transitions, error handling, performance tracking, Three.js optimization, CSP, SRI, accessibility enhancements, mobile performance, texture modularization, galaxy loading optimizations, orbital inclinations, improved seamless texture wrapping, easter egg organization, celestial texture improvements, celestial mechanics improvements, runtime improvements, post-processing improvements, lighting improvements, particle effects improvements, camera controls improvements, audio assets support, performance optimizations
**Remember:** Always update this file when making structural changes to the project!
